<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Merchant Main</title>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" type="text/css"
	href="common/index_lib/bootstrap/css/bootstrap.css">
<link rel="stylesheet" type="text/css"
	href="common/index_lib/stylesheets/theme.css">
<link rel="stylesheet"
	href="common/index_lib/font-awesome/css/font-awesome.css">
<script src="common/index_lib/jquery-1.7.2.min.js"
	type="text/javascript"></script>
<script src="common/index_lib/bootstrap/js/bootstrap.js"></script>
<script src="common/jquery.form.js"></script>
<style type="text/css">
.brand {
	font-family: georgia, serif;
}

.brand .first {
	color: #ccc;
	font-style: unset;
}
</style>


</head>

<body>

	<div class="navbar">
		<div class="navbar-inner">
			<ul class="nav pull-right">
				<li id="fat-menu" class="dropdown"><a href="#" role="button"
					class="dropdown-toggle" data-toggle="dropdown"> <i
						class="icon-user"></i>名字
				</a>
					<ul class="dropdown-menu">
						<li><a tabindex="-1" href="#">我的信息</a></li>
						<li class="divider"></li>
						<li><a tabindex="-1" class="visible-phone" href="#">Settings</a></li>
						<li class="divider visible-phone"></li>
						<li><a tabindex="-1" href="sign-in.html">退出</a></li>
					</ul></li>
			</ul>
			<a class="brand" href="index.html"><span class="first">商家管理</span></a>
		</div>
	</div>


	<div class="sidebar-nav">
		<!--<a href="#dashboard-menu" class="nav-header" data-toggle="collapse"><i class="icon-dashboard"></i>dashboard</a>-->
		<!--<ul id="dashboard-menu" class="nav nav-list collapse in">-->
		<!--<li><a href="index.html">Home</a></li>-->
		<!--<li><a href="users.html">Sample List</a></li>-->
		<!--<li><a href="user.html">Sample Item</a></li>-->
		<!--<li><a href="media.html">Media</a></li>-->
		<!--<li><a href="calendar.html">Calendar</a></li>-->
		<!--</ul>-->
		<a href="#shop-menu" class="nav-header" data-toggle="collapse"></i>店铺操作</a>
		<ul id="shop-menu" class="nav nav-list collapse in">
			<li><a href="showShopStatus.html">店铺状态</a></li>
			<li><a href="showRegisterInfo.html">查看注册信息</a></li>
			<li><a href="applyAd.html">申请店铺广告</a></li>
		</ul>
		<a href="#food-menu" class="nav-header" data-toggle="collapse"></i>菜品操作</a>
		<ul id="food-menu" class="nav nav-list collapse in">
			<li><a href="showMyFoods.html">查看我的菜品</a></li>
			<li><a href="addFood.html">添加菜品</a></li>
		</ul>
		<a href="#user-menu" class="nav-header" data-toggle="collapse"></i>个人操作</a>
		<ul id="user-menu" class="nav nav-list collapse in">
			<li><a href="updateInfo.html">修改个人信息</a></li>
			<li><a href="updatePw.html">修改密码</a></li>
		</ul>
	</div>
	<div class="content" id="content">
		<h1><strong><p class="text-center">商家基本信息</p></strong></h1>
    <form method="post" enctype="multipart/form-data" id="jvForm">
        <div >
            <br>
            <br>
            开业时间  <input name="openTime" type="time" class="openTime">
            休业时间  <input name="closeTime" type="time" class="closeTime">

            <br>
            <br>
            配送范围  <input name="delivery" type="number" class="delivery" step="5"> 公里
            配送费用<input name="deliFee" type="number" class="deliFee" step="0.5">元
        </div>

        <br>
        图片 ： <img name="img1" width="150" height="150" class="img">
        <input  name="picture" type="file" value="选择照片"accept="image/gif,image/jpeg,image/jpg,image/png,image/svg"/>

        <br>
        <br>
        标语  <input name="slogan" type="text" style="width: 300px;height: 150px" class="slogan">
        备注  <input name="comments" type="text" style="width: 300px;height: 150px" class="comments">
        <br>
        <br>
        <button id="commit" onclick="uploadData()">保存</Button>
    </form>
	
	</div>
	<script>
		window.onload = function() {
			let foodNameReg=/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/;
	            //配送范围
	        let deliveryReg=/^[a-zA-Z][a-zA-Z0-9_]{5,30}$/;
	            //同foodPriceReg
			
			let url="http://localhost:9090/typhoon_merchant/ShowRestaurantDetailServlet";
	        let headers=[{"key":"Content-Type","value":"application/json"}];
	        function render(data) {
	            $(".openTime").val(data.openTime);
	            $(".closeTime").val(data.closeTime);
	            $(".delivery").val(data.delivery);
	            $(".deliFee").val(data.deliFee);
	            $(".img").attr("src",data.picture);
	            $(".slogan").val(data.slogan);
	            $(".comments").val(data.comments);
	        };

	        function getData(method,url,data,headers) {
	            $.ajax({
	                type: method,
	                url: url,
	                dataType:"json",
	                success: function(data){
	                    render(data);
	                },
	                error : function(err) {
						alert(err);
					}
	            });
	        };
	        getData("GET",url,null,headers);
	         
		}
		 function uploadData() {
	            var options = {
	                url:"UpdateRestaurantServlet",
	                type:"post",
	                dataType: 'json',
	                success: function(){
	                    //alert("OK");
	                },
	                error : function(err) {
	                	//alert(err);
					}
	            };
	            //jquery.form使用方式
	            $("#jvForm").ajaxSubmit(options);
	            return false;
	        };
	</script>
</body>
</html>


