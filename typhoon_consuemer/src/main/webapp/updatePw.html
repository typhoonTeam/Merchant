<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Merchant Main</title>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" type="text/css"
	href="common/index_lib/bootstrap/css/bootstrap.css">
<link rel="stylesheet" type="text/css"
	href="common/index_lib/stylesheets/theme.css">
<link rel="stylesheet"
	href="common/index_lib/font-awesome/css/font-awesome.css">
<script src="common/index_lib/jquery-1.7.2.min.js"
	type="text/javascript"></script>
<script src="common/index_lib/bootstrap/js/bootstrap.js"></script>
<script src="common/jquery.form.js"></script>
<style type="text/css">
.brand {
	font-family: georgia, serif;
}

.brand .first {
	color: #ccc;
	font-style: unset;
}
</style>


</head>

<body>

	<div class="navbar">
		<div class="navbar-inner">
			<ul class="nav pull-right">
				<li id="fat-menu" class="dropdown"><a href="#" role="button"
					class="dropdown-toggle" data-toggle="dropdown"> <i
						class="icon-user"></i>名字
				</a>
					<ul class="dropdown-menu">
						<li><a tabindex="-1" href="#">我的信息</a></li>
						<li class="divider"></li>
						<li><a tabindex="-1" class="visible-phone" href="#">Settings</a></li>
						<li class="divider visible-phone"></li>
						<li><a tabindex="-1" href="sign-in.html">退出</a></li>
					</ul></li>
			</ul>
			<a class="brand" href="index.html"><span class="first">商家管理</span></a>
		</div>
	</div>


	<div class="sidebar-nav">
		<!--<a href="#dashboard-menu" class="nav-header" data-toggle="collapse"><i class="icon-dashboard"></i>dashboard</a>-->
		<!--<ul id="dashboard-menu" class="nav nav-list collapse in">-->
		<!--<li><a href="index.html">Home</a></li>-->
		<!--<li><a href="users.html">Sample List</a></li>-->
		<!--<li><a href="user.html">Sample Item</a></li>-->
		<!--<li><a href="media.html">Media</a></li>-->
		<!--<li><a href="calendar.html">Calendar</a></li>-->
		<!--</ul>-->
		<a href="#shop-menu" class="nav-header" data-toggle="collapse"></i>店铺操作</a>
		<ul id="shop-menu" class="nav nav-list collapse in">
			<li><a href="showShopStatus.html">店铺状态</a></li>
			<li><a href="showRegisterInfo.html">查看注册信息</a></li>
			<li><a href="applyAd.html">申请店铺广告</a></li>
		</ul>
		<a href="#food-menu" class="nav-header" data-toggle="collapse"></i>菜品操作</a>
		<ul id="food-menu" class="nav nav-list collapse in">
			<li><a href="showMyFoods.html">查看我的菜品</a></li>
			<li><a href="addFood.html">添加菜品</a></li>
		</ul>
		<a href="#user-menu" class="nav-header" data-toggle="collapse"></i>个人操作</a>
		<ul id="user-menu" class="nav nav-list collapse in">
			<li><a href="updateInfo.html">修改个人信息</a></li>
			<li><a href="updatePw.html">修改密码</a></li>
		</ul>
	</div>
	<div class="content" id="content">
		 <h1><strong><p class="text-center">修改密码</p></strong></h1>
    <form method="post" enctype="multipart/form-data" id="jvForm">
            <br>
            <br>
            旧密码：  <input name="password" type="text" class="password"><span class="tip"></span>
            <br>
            新密码:  <input name="newPassword" type="password" class="newPassword"><span class="tip"></span>
            <br>
            确认密码:  <input name="comPassword" type="password" class="comPassword"><span class="tip"></span>
            <br>
        <button id="commit" onclick="uploadData()">保存</Button>
    </form>
	</div>
	<script>
		window.onload = function() {
			let pswReg=/^(?![A-Z]+$)(?![a-z]+$)(?!\d+$)\S{6,}$/;
	        let errors=new Map();
			
	        let headers=[{"key":"Content-Type","value":"application/json"}];
	        function render(data) {
	        }; 
	        function validate(message) {
	            errors.clear();
	            if(message.psw1){
	                if(!pswReg.test(message.psw1)){errors.set('psw1','数字/大写/小写字母,至少两种组成，长度不小于6');}
	            }
	            if(message.psw2){
	                if(!pswReg.test(message.psw2)){errors.set('psw2','数字/大写/小写字母,至少两种组成，长度不小于6');}
	            }
	            if(message.psw3){
	                if(!pswReg.test(message.psw3)){errors.set('psw3','数字/大写/小写字母,至少两种组成，长度不小于6');}
	            }
	        }
	        function renderError(errors) {
	            let pswSpan1=document.querySelector("#jvForm input[name=password]").nextElementSibling;
	            pswSpan1.textContent=errors.get('psw1');
	            let pswSpan2=document.querySelector("#jvForm input[name=newPassword]").nextElementSibling;
	            pswSpan2.textContent=errors.get('psw2');
	            let pswSpan3=document.querySelector("#jvForm input[name=comPassword]").nextElementSibling;
	            pswSpan3.textContent=errors.get('psw3');
	        }
	        document.querySelector("#jvForm").addEventListener("change",function (e) {
	            e.preventDefault();
	            let psw1=document.querySelector("#jvForm input[name=password]").value;
	            let psw2=document.querySelector("#jvForm input[name=newPassword]").value;
	            let psw3=document.querySelector("#jvForm input[name=comPassword]").value;
	            let message={
	                psw1:psw1,
	                psw2:psw2,
	                psw3:psw3
	            };
	            validate(message);
	            renderError(errors);
	        })
		}
		 function uploadData() {
			 alert("asdasd");
	            var options = {
	                url:"UpdatePasswordServlet",
	                type:"post",
	                dataType: 'json',
	                success: function(){
	                    alert("OK");
	                },
	                error : function(err) {
	                	//alert(err);
					}
	            };
	            //jquery.form使用方式
	             $("#jvForm").ajaxSubmit(options);
	            return false;
	        };
	</script>
</body>
</html>


